<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="index.css">
    <script src="apexcharts.min.js"></script>
</head>
<script>
    function select(element) {
        document.querySelectorAll('.selected').forEach(e => { e.classList.remove('selected') })
        element.querySelector('.activeIndicator').classList.add('selected')
    }
</script>

<body>
    <div class="page">
        <div class="sideBar">
            <a href="#download">
                <div class="item" onclick="select(this)">
                    <div class="activeIndicator selected">
                        <img class="icon" src="temperature.svg">
                    </div>
                    <div class="label">Temperature</div>
                </div>
            </a>
            <a href="#home">
                <div class="item" onclick="select(this)">
                    <div class="activeIndicator">
                        <img class="icon" src="tds.svg">
                    </div>
                    <div class="label">TDS</div>
                </div>
            </a>
            <a href="#services">
                <div class="item" onclick="select(this)">
                    <div class="activeIndicator">
                        <img class="icon" src="turbidity.svg">
                    </div>
                    <div class="label">Turbidity</div>
                </div>
            </a>
            <a href="#clients">
                <div class="item" onclick="select(this)">
                    <div class="activeIndicator">
                        <img class="icon" src="pH.svg">
                    </div>
                    <div class="label">pH</div>
                </div>
            </a>
            <a href="#contact">
                <div class="item" onclick="select(this)">
                    <div class="activeIndicator">
                        <img class="icon" src="download.svg">
                    </div>
                    <div class="label">Download</div>
                </div>
            </a>
        </div>
        <div class="content">
            <div class="card">
                <div class="chart" id="chart1"></div>
                <div class="cardContent">
                    <h1>Temperature</h1>
                    <p>Mesured in degrees celcius, this Sensor uses a K type thermocouple operating at 3.3v</p>
                    <a href="calibrate" style="text-decoration: none;">
                        <div class="cardButton">Calibrate</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    var apexChartOptions = {
        series: [
            {
                name: "Temperature",
                data: []
            }
        ],
        chart: {
            type: 'line',
            height: 350,
            background: '#004880',
            animations: {
                easing: 'easein',
            },
            fontFamily: 'Lato, sans-serif',
            foreColor: '#d3e4ff',
            zoom: {
                enabled: true,
                autoScaleYaxis: false,
                zoomedArea: {
                    fill: {
                        color: '#90CAF9',
                        opacity: 0.4
                    },
                    stroke: {
                        color: '#0D47A1',
                        opacity: 0.4,
                        width: 1
                    }
                }
            },
            toolbar: {
                show: true,
                tools: {
                    download: '<img class="icon" src="download.svg" width="50">',
                    selection: false,
                    zoom: '<img class="icon" src="select.svg" width="50">',
                    zoomin: '<img class="icon" src="zoom_in.svg" width="50">',
                    zoomout: '<img class="icon" src="zoom_out.svg" width="50">',
                    pan: false,
                    reset: '<img class="icon" src="zoom_out_map.svg" width="50">',
                }
            },
        },
        color: '#d3e4ff',
        dataLabels: {
            enabled: true,
            style: {
                fontSize: '14px',
                fontFamily: 'Lato, sans-serif',
                fontWeight: 'bold',
            },
            background: {
                enabled: true,
                foreColor: '#004880',
                padding: 8,
                borderRadius: 12,
                borderWidth: 0,
                opacity: 1,
            },
        },
        stroke: {
            curve: 'smooth'
        },
        grid: {
            show: false,
        },
        markers: {
            size: 0,
            hover: {
                size: 0,
            }
        },
        xaxis: {
            axisTicks: {
                color: '#d3e4ff',
            },
            axisBorder: {
                show: true,
            },
            labels: {
                style: {
                    // colors: '#d3e4ff',
                    fontSize: '12px',
                    // fontFamily: 'Lato, sans-serif',
                    fontWeight: 300,
                },
            },
        },

        yaxis: {
            title: {
                text: 'Temperature (\xB0C)',
                style: {
                    // color: '#d3e4ff',
                    fontSize: '12px',
                    // fontFamily: 'Lato, sans-serif',
                    fontWeight: 300,
                },
            },
            axisTicks: {
                color: '#d3e4ff',
                show: true,
            },
            axisBorder: {
                show: true,
            },
            labels: {
                style: {
                    colors: '#d3e4ff',
                    fontSize: '12px',
                    fontFamily: 'Lato, sans-serif',
                    fontWeight: 300,
                },
            },
        },
    };

    var chart1 = new ApexCharts(document.querySelector("#chart1"), apexChartOptions);
    // chart.render();

    window.onload = getData

    function getData() {
        apexChartOptions.series[0].data.push({
            x: `1`,
            y: 1
        })
        apexChartOptions.series[0].data.push({
            x: `2`,
            y: 2
        })
        apexChartOptions.series[0].data.push({
            x: `4`,
            y: 4
        })
        apexChartOptions.series[0].data.push({
            x: `8`,
            y: 8
        })
        apexChartOptions.series[0].data.push({
            x: `16`,
            y: 16
        })

        chart1.render()
    }

    function x() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var prevDate = ''
                var lines = this.responseText.split("\n");
                lines && lines.forEach((line, lineNumber) => {
                    var rowValues = line.split(",")
                    if (rowValues.length == (numberOfDataSeries + 2)) { // skip incomplete lines
                        if (lineNumber > 0) { // ignore header row
                            rowValues = rowValues.map(val => val.replace('\r', '')) // clean up \r from any values

                            var dateStr = (rowValues[0] != prevDate) ? rowValues[0] : ''
                            prevDate = rowValues[0]
                            apexChartOptions.series[0].data.push({
                                x: `${rowValues[0]} ${rowValues[1]}`,
                                y: rowValues[2]
                            })

                            //charts.GPSLong.xAxisLabels.push(`${dateStr} ${rowValues[1]}`)
                            //charts.GPSLong.values.push(rowValues[3])
                        }
                    }
                })
                chart1.render()
            }
        };
        xhttp.open("GET", "Water Quality Data.csv", true);
        xhttp.send();
    }

</script>

<script>
//     var numberOfDataSeries = 5
//     var apexChartOptions = {
//         series: [{
//             name: 'series1',
//             data: [12, 11, 14, 18, 17, 13, 13]
//         }],
//         chart: {
//             height: 350,
//             width: '100%',
//             type: 'area',
//             toolbar: {
//                 show: false,
//             },
//         },
//         // colors: ['#5350e9'],
//         // stroke: {
//         //     width: 2,
//         // },
//         // grid: {
//         //     show: false,
//         // },
//         dataLabels: {
//             enabled: false
//         },
//         // xaxis: {
//         //     type: 'category',
//         //     axisBorder: {
//         //         show: false
//         //     },
//         //     axisTicks: {
//         //         show: false
//         //     },
//         //     labels: {
//         //         show: false,
//         //     }
//         // },
//         // show: false,
//         // yaxis: {
//         //     labels: {
//         //         show: false,
//         //     },
//         // },
//         // tooltip: {
//         //     x: {
//         //         show: false
//         //     },
//         // },
//     }
//     var chart1 = new ApexCharts(document.querySelector("#ChartGPSLat"), apexChartOptions);

//     window.onload = getData()

//     function getData() {
//         apexChartOptions.series[0].data.push({
//             x: `1`,
//             y: 1
//         })
//         apexChartOptions.series[0].data.push({
//             x: `2`,
//             y: 2
//         })
//         apexChartOptions.series[0].data.push({
//             x: `4`,
//             y: 4
//         })
//         apexChartOptions.series[0].data.push({
//             x: `8`,
//             y: 8
//         })
//         apexChartOptions.series[0].data.push({
//             x: `16`,
//             y: 16
//         })
//         chart1.render()
//     }

//     function x() {
//         var xhttp = new XMLHttpRequest();
//         xhttp.onreadystatechange = function () {
//             if (this.readyState == 4 && this.status == 200) {
//                 var prevDate = ''
//                 var lines = this.responseText.split("\n");
//                 lines && lines.forEach((line, lineNumber) => {
//                     var rowValues = line.split(",")
//                     if (rowValues.length == (numberOfDataSeries + 2)) { // skip incomplete lines
//                         if (lineNumber > 0) { // ignore header row
//                             rowValues = rowValues.map(val => val.replace('\r', '')) // clean up \r from any values

//                             var dateStr = (rowValues[0] != prevDate) ? rowValues[0] : ''
//                             prevDate = rowValues[0]
//                             apexChartOptions.series[0].data.push({
//                                 x: `${rowValues[0]} ${rowValues[1]}`,
//                                 y: rowValues[2]
//                             })

//                             //charts.GPSLong.xAxisLabels.push(`${dateStr} ${rowValues[1]}`)
//                             //charts.GPSLong.values.push(rowValues[3])
//                         }
//                     }
//                 })
//                 chart1.render()
//             }
//         };
//         xhttp.open("GET", "Water Quality Data.csv", true);
//         xhttp.send();
//     }

</script>

</html>